<script type="text/javascript">
//<![CDATA[
	/* Make sure all credit card details have been provided and are valid */
	function check_NMI_payment_form() {
		var NMI_name = g("NMI_name");
		var NMI_ccno = g("NMI_ccno");
		var NMI_ccexpm = g("NMI_ccexpm");
		var NMI_ccexpy = g("NMI_ccexpy");

		if(NMI_name.value == "") {
			alert("%%LNG_NMIEnterName%%");
			NMI_name.focus();
			return false;
		}

		if(isNaN(NMI_ccno.value) || NMI_ccno.value == "") {
			alert("%%LNG_NMIEnterCardNumber%%");
			NMI_ccno.focus();
			NMI_ccno.select();
			return false;
		}

		if(NMI_ccexpm.selectedIndex == 0) {
			alert("%%LNG_NMIEnterCreditCardMonth%%");
			NMI_ccexpm.focus();
			return false;
		}

		if(NMI_ccexpy.selectedIndex == 0) {
			alert("%%LNG_NMIEnterCreditCardYear%%");
			NMI_ccexpy.focus();
			return false;
		}

		if(requiresCVV2() && ($('#cc_cvv2').val() == '' || isNaN($('#cc_cvv2').val()) || $('#cc_cvv2').val().length > 4)) {
			alert('%%LNG_NMIEnterCVV2Number%%');
			$('#cc_cvv2').focus();
			$('#cc_cvv2').select();
			return false;
		}

		return true;
	}

	function requiresCVV2() {
		if($('#CVV2Input').css('display') != 'none') {
			return true;
		}
		else {
			return false;
		}
	}

	$(document).ready(function() {
		$('#CVV2Help').click(function() {
			alert('%%LNG_CreditCardCVV2Help%%');
			return false;
		});
	});
//]]>
</script>